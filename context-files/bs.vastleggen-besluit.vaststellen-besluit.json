{
    "display": "form",
    "components": [
        {
            "label": "Container Genomen besluit",
            "tableView": false,
            "validateWhenHidden": false,
            "key": "pv.besluit",
            "type": "container",
            "input": true,
            "components": [
                {
                    "label": "Bijstandsvorm",
                    "widget": "choicesjs",
                    "tableView": true,
                    "data": {
                        "values": [
                            {
                                "label": "Lening",
                                "value": "LENING"
                            },
                            {
                                "label": "Krediethypotheek",
                                "value": "KREDIETHYPOTHEEK"
                            },
                            {
                                "label": "Uitkering om niet",
                                "value": "OMNIET"
                            }
                        ]
                    },
                    "validate": {
                        "required": true
                    },
                    "conditional": {
                        "show": true,
                        "when": "pv.besluit.genomenBesluit",
                        "eq": "TOEGEKEND"
                    },
                    "validateWhenHidden": false,
                    "key": "pv.verstrekkingsvorm",
                    "type": "select",
                    "input": true
                },
                {
                    "label": "beslisser",
                    "customDefaultValue": "value = JSON.parse(localStorage.getItem('userIdentity'))?.firstName + ' ' + JSON.parse(localStorage.getItem('userIdentity'))?.lastName;",
                    "key": "beslisser",
                    "type": "hidden",
                    "input": true,
                    "tableView": false
                },
                {
                    "label": "besluitDatum",
                    "customDefaultValue": "value = new Date();",
                    "key": "besluitDatum",
                    "type": "hidden",
                    "input": true,
                    "tableView": false
                },
                {
                    "label": "Genomen besluit",
                    "optionsLabelPosition": "right",
                    "inline": false,
                    "tableView": false,
                    "values": [
                        {
                            "label": "Toekennen",
                            "value": "TOEGEKEND"
                        },
                        {
                            "label": "Afwijzen",
                            "value": "AFGEWEZEN"
                        }
                    ],
                    "key": "genomenBesluit",
                    "type": "radio",
                    "validate": {
                        "required": true
                    },
                    "input": true
                },
                {
                    "label": "Reden afwijzing",
                    "key": "redenAfwijzing",
                    "type": "textfield",
                    "validate": {
                        "required": true
                    },
                    "customConditional": "show = (data.pv?.besluit?.genomenBesluit === 'AFGEWEZEN');",
                    "input": true,
                    "tableView": false
                },
                {
                    "label": "Upload hieronder de beschikking",
                    "type": "documenten-api-file",
                    "key": "besluitDocumenten",
                    "customConditional": "show = data.pv?.besluit?.genomenBesluit === 'TOEGEKEND'",
                    "customOptions": {
                        "title": "",
                        "hideTitle": false,
                        "subtitle": "",
                        "maxFileSize": 1,
                        "hideMaxFileSize": false,
                        "camera": false,
                        "documentTitle": "Besluit",
                        "disableDocumentTitle": false,
                        "filename": "",
                        "disableFilename": false,
                        "author": "",
                        "disableAuthor": false,
                        "status": "definitief",
                        "disableStatus": false,
                        "language": "nld",
                        "disableLanguage": false,
                        "documentType": "Toekenningsbeschikking",
                        "disableDocumentType": true,
                        "description": "Besluit",
                        "disableDescription": false,
                        "confidentialityLevel": "zaakvertrouwelijk",
                        "disableConfidentialityLevel": false
                    },
                    "customDefaultValue": " component.customOptions.author = data.pv?.besluit?.beslisser;",
                    "input": true,
                    "validate": {
                        "required": true,
                        "custom": "valid = input.length == 1;",
                        "customMessage": "Upload maximaal 1 document"
                    },
                    "tableView": false
                },
                {
                    "label": "Upload hieronder de beschikking",
                    "type": "documenten-api-file",
                    "key": "besluitDocumenten",
                    "customConditional": "show = data.pv?.besluit?.genomenBesluit === 'AFGEWEZEN'",
                    "customDefaultValue": " component.customOptions.author = data.pv?.besluit?.beslisser;",
                    "customOptions": {
                        "title": "",
                        "hideTitle": false,
                        "subtitle": "",
                        "maxFileSize": 1,
                        "hideMaxFileSize": false,
                        "camera": false,
                        "documentTitle": "Besluit",
                        "disableDocumentTitle": false,
                        "filename": "",
                        "disableFilename": false,
                        "author": "",
                        "disableAuthor": false,
                        "status": "definitief",
                        "disableStatus": false,
                        "language": "nld",
                        "disableLanguage": false,
                        "documentType": "Afwijzingsbeschikking",
                        "disableDocumentType": true,
                        "description": "Besluit",
                        "disableDescription": false,
                        "confidentialityLevel": "zaakvertrouwelijk",
                        "disableConfidentialityLevel": false
                    },
                    "input": true,
                    "validate": {
                        "required": true,
                        "custom": "valid = input.length == 1;",
                        "customMessage": "Upload maximaal 1 document"
                    },
                    "tableView": false
                }
            ]
        },
        {
            "label": "Columns",
            "columns": [
                {
                    "components": [
                        {
                            "label": "HTML",
                            "tag": "div",
                            "content": "<h4>Norm</h4>",
                            "refreshOnChange": false,
                            "key": "html",
                            "type": "htmlelement",
                            "input": false,
                            "tableView": false
                        }
                    ],
                    "width": 10,
                    "offset": 0,
                    "push": 0,
                    "pull": 0,
                    "size": "md",
                    "currentWidth": 10
                },
                {
                    "components": [
                        {
                            "label": "Norm aanpassen?",
                            "customClass": "mb-3",
                            "tableView": false,
                            "defaultValue": false,
                            "key": "pv.normAanpassen",
                            "logic": [
                                {
                                    "name": "disable when",
                                    "trigger": {
                                        "type": "simple",
                                        "simple": {
                                            "show": true,
                                            "when": "pv.normAanpassen",
                                            "eq": "true"
                                        }
                                    },
                                    "actions": [
                                        {
                                            "name": "disable",
                                            "type": "property",
                                            "property": {
                                                "label": "Disabled",
                                                "value": "disabled",
                                                "type": "boolean"
                                            },
                                            "state": true
                                        }
                                    ]
                                }
                            ],
                            "type": "checkbox",
                            "labelMargin": 3,
                            "validateWhenHidden": false,
                            "input": true
                        }
                    ],
                    "width": 2,
                    "offset": 0,
                    "push": 0,
                    "pull": 0,
                    "size": "md",
                    "currentWidth": 2
                }
            ],
            "customClass": "mb-3",
            "hidden": true,
            "key": "columns",
            "type": "columns",
            "input": false,
            "tableView": false
        },
        {
            "label": "Norm",
            "tableView": false,
            "validateWhenHidden": false,
            "key": "pv.norm",
            "hidden": true,
            "logic": [
                {
                    "name": "disable when",
                    "trigger": {
                        "type": "simple",
                        "simple": {
                            "show": true,
                            "when": "pv.normAanpassen",
                            "eq": "false"
                        }
                    },
                    "actions": [
                        {
                            "name": "disable",
                            "type": "property",
                            "property": {
                                "label": "Disabled",
                                "value": "disabled",
                                "type": "boolean"
                            },
                            "state": true
                        }
                    ]
                }
            ],
            "type": "container",
            "input": true,
            "components": [
                {
                    "label": "Columns",
                    "columns": [
                        {
                            "components": [
                                {
                                    "label": "Aantal rechthebbenden",
                                    "applyMaskOn": "change",
                                    "mask": false,
                                    "tableView": false,
                                    "delimiter": false,
                                    "requireDecimal": false,
                                    "inputFormat": "plain",
                                    "truncateMultipleSpaces": false,
                                    "validate": {
                                        "required": true,
                                        "min": 1,
                                        "max": 2
                                    },
                                    "validateWhenHidden": false,
                                    "key": "aantalRechthebbenden",
                                    "type": "number",
                                    "input": true
                                },
                                {
                                    "label": "Aantal kostendelers",
                                    "applyMaskOn": "change",
                                    "mask": false,
                                    "tableView": false,
                                    "delimiter": false,
                                    "requireDecimal": false,
                                    "inputFormat": "plain",
                                    "truncateMultipleSpaces": false,
                                    "validate": {
                                        "required": true,
                                        "min": 0
                                    },
                                    "validateWhenHidden": false,
                                    "key": "aantalKostendelers",
                                    "type": "number",
                                    "input": true
                                }
                            ],
                            "width": 6,
                            "offset": 0,
                            "push": 0,
                            "pull": 0,
                            "size": "md",
                            "currentWidth": 6
                        },
                        {
                            "components": [],
                            "width": 6,
                            "offset": 0,
                            "push": 0,
                            "pull": 0,
                            "size": "md",
                            "currentWidth": 6
                        }
                    ],
                    "key": "columns1",
                    "type": "columns",
                    "input": false,
                    "tableView": false
                },
                {
                    "label": "Columns",
                    "columns": [
                        {
                            "components": [
                                {
                                    "label": "Kostendelersnorm",
                                    "widget": "choicesjs",
                                    "customClass": "{{ data.pv.normAanpassen ? : select-disabled }}",
                                    "tableView": true,
                                    "data": {
                                        "values": [
                                            {
                                                "label": "Samenwonende waarvan 1 jongere met kinderen norm",
                                                "value": "samenwonende-waarvan-1-jongere-met-kinderen-norm"
                                            },
                                            {
                                                "label": "Samenwonende waarvan 1 jongere zonder kinderen norm",
                                                "value": "samenwonende-waarvan-1-jongere-zonder-kinderen-norm"
                                            },
                                            {
                                                "label": "Samenwonende norm",
                                                "value": "samenwonende-norm"
                                            }
                                        ]
                                    },
                                    "clearOnHide": false,
                                    "validate": {
                                        "required": true
                                    },
                                    "key": "kostendelersnorm",
                                    "customConditional": "show = (data.pv?.norm?.aantalKostendelers > 0)",
                                    "type": "select",
                                    "validateWhenHidden": false,
                                    "input": true
                                },
                                {
                                    "label": "Kostendelersfactor",
                                    "applyMaskOn": "change",
                                    "mask": false,
                                    "tableView": false,
                                    "delimiter": false,
                                    "requireDecimal": false,
                                    "inputFormat": "plain",
                                    "truncateMultipleSpaces": false,
                                    "clearOnHide": false,
                                    "validate": {
                                        "required": true
                                    },
                                    "validateWhenHidden": false,
                                    "key": "kostendelersfactor",
                                    "customConditional": "show = (data.pv?.norm?.aantalKostendelers > 0)",
                                    "type": "number",
                                    "input": true
                                },
                                {
                                    "label": "Kostendelersnormbedrag",
                                    "applyMaskOn": "change",
                                    "mask": false,
                                    "tableView": false,
                                    "currency": "EUR",
                                    "inputFormat": "plain",
                                    "truncateMultipleSpaces": false,
                                    "clearOnHide": false,
                                    "validate": {
                                        "required": true
                                    },
                                    "validateWhenHidden": false,
                                    "key": "kostendelersNormbedrag",
                                    "customConditional": "show = (data.pv?.norm?.aantalKostendelers > 0)",
                                    "type": "currency",
                                    "input": true,
                                    "delimiter": true
                                }
                            ],
                            "width": 6,
                            "offset": 0,
                            "push": 0,
                            "pull": 0,
                            "size": "md",
                            "currentWidth": 6
                        },
                        {
                            "components": [
                                {
                                    "label": "Kostendelersnorm - Partner",
                                    "widget": "choicesjs",
                                    "customClass": "{{ data.pv.normAanpassen ? : select-disabled }}",
                                    "tableView": true,
                                    "data": {
                                        "values": [
                                            {
                                                "label": "Samenwonende waarvan 1 jongere met kinderen norm",
                                                "value": "samenwonende-waarvan-1-jongere-met-kinderen-norm"
                                            },
                                            {
                                                "label": "Samenwonende waarvan 1 jongere zonder kinderen norm",
                                                "value": "samenwonende-waarvan-1-jongere-zonder-kinderen-norm"
                                            },
                                            {
                                                "label": "Samenwonende norm",
                                                "value": "samenwonende-norm"
                                            }
                                        ]
                                    },
                                    "clearOnHide": false,
                                    "validate": {
                                        "required": true
                                    },
                                    "validateWhenHidden": false,
                                    "key": "kostendelersnormPartner",
                                    "customConditional": "show = (data.pv?.norm?.aantalKostendelers > 0 && data.pv?.norm?.aantalRechthebbenden === 2)",
                                    "type": "select",
                                    "input": true
                                },
                                {
                                    "label": "Kostendelersfactor - Partner",
                                    "applyMaskOn": "change",
                                    "mask": false,
                                    "tableView": false,
                                    "delimiter": false,
                                    "requireDecimal": false,
                                    "inputFormat": "plain",
                                    "truncateMultipleSpaces": false,
                                    "redrawOn": "pv.norm.aantalRechthebbenden",
                                    "clearOnHide": false,
                                    "validate": {
                                        "required": true
                                    },
                                    "validateWhenHidden": false,
                                    "key": "kostendelersfactorPartner",
                                    "customConditional": "show = (data.pv?.norm?.aantalKostendelers > 0 && data.pv?.norm?.aantalRechthebbenden === 2)",
                                    "type": "number",
                                    "input": true
                                },
                                {
                                    "label": "Kostendelersnormbedrag - Partner",
                                    "applyMaskOn": "change",
                                    "mask": false,
                                    "tableView": false,
                                    "currency": "EUR",
                                    "inputFormat": "plain",
                                    "truncateMultipleSpaces": false,
                                    "clearOnHide": false,
                                    "validate": {
                                        "required": true
                                    },
                                    "validateWhenHidden": false,
                                    "key": "kostendelersNormbedragPartner",
                                    "customConditional": "show = (data.pv?.norm?.aantalKostendelers > 0 && data.pv?.norm?.aantalRechthebbenden === 2)",
                                    "type": "currency",
                                    "input": true,
                                    "delimiter": true
                                }
                            ],
                            "width": 6,
                            "offset": 0,
                            "push": 0,
                            "pull": 0,
                            "size": "md",
                            "currentWidth": 6
                        }
                    ],
                    "key": "columns",
                    "type": "columns",
                    "input": false,
                    "tableView": false
                },
                {
                    "label": "Columns",
                    "columns": [
                        {
                            "components": [
                                {
                                    "label": "Kostendelersnormbedrag - Gezamenlijk",
                                    "applyMaskOn": "change",
                                    "mask": false,
                                    "tableView": false,
                                    "currency": "EUR",
                                    "inputFormat": "plain",
                                    "truncateMultipleSpaces": false,
                                    "redrawOn": "data",
                                    "clearOnHide": false,
                                    "calculateValue": "data.pv?.normAanpassen ? value = (data.pv?.norm?.kostendelersNormbedrag + data.pv?.norm?.kostendelersNormbedragPartner) : value = instance.component.DefaultValue",
                                    "validate": {
                                        "required": true
                                    },
                                    "validateWhenHidden": false,
                                    "key": "kostendelersNormbedragGezamenlijk",
                                    "customConditional": "show = (data.pv?.norm?.aantalKostendelers > 0 && data.pv?.norm?.aantalRechthebbenden === 2)",
                                    "type": "currency",
                                    "input": true,
                                    "delimiter": true
                                },
                                {
                                    "label": "Basisnorm",
                                    "widget": "choicesjs",
                                    "customClass": "{{ data.pv.normAanpassen ? : select-disabled }}",
                                    "tableView": true,
                                    "data": {
                                        "values": [
                                            {
                                                "label": "Alleenstaande in inrichting norm",
                                                "value": "alleenstaande-in-inrichting-norm"
                                            },
                                            {
                                                "label": "Samenwonend in inrichting norm",
                                                "value": "samenwonend-in-inrichting-norm"
                                            },
                                            {
                                                "label": "Alleenstaande ouder jongere norm",
                                                "value": "alleenstaande-ouder-jongere-norm"
                                            },
                                            {
                                                "label": "Samenwonende jongere met kinderen norm",
                                                "value": "samenwonende-jongere-met-kinderen-norm"
                                            },
                                            {
                                                "label": "Samenwonende waarvan 1 jongere met kinderen norm",
                                                "value": "samenwonende-waarvan-1-jongere-met-kinderen-norm"
                                            },
                                            {
                                                "label": "Alleenstaande jongere zonder kinderen norm",
                                                "value": "alleenstaande-jongere-zonder-kinderen-norm"
                                            },
                                            {
                                                "label": "Samenwonende jongere zonder kinderen norm",
                                                "value": "samenwonende-jongere-zonder-kinderen-norm"
                                            },
                                            {
                                                "label": "Samenwonende waarvan 1 jongere zonder kinderen norm",
                                                "value": "samenwonende-waarvan-1-jongere-zonder-kinderen-norm"
                                            },
                                            {
                                                "label": "Alleenstaande norm",
                                                "value": "alleenstaande-norm"
                                            },
                                            {
                                                "label": "Samenwonende norm",
                                                "value": "samenwonende-norm"
                                            },
                                            {
                                                "label": "Alleenstaande oudere norm",
                                                "value": "alleenstaande-oudere-norm"
                                            },
                                            {
                                                "label": "Samenwonende oudere norm",
                                                "value": "samenwonende-oudere-norm"
                                            },
                                            {
                                                "label": "Samenwonende 1 oudere norm",
                                                "value": "samenwonende-1-oudere-norm"
                                            }
                                        ]
                                    },
                                    "clearOnHide": false,
                                    "validate": {
                                        "required": true
                                    },
                                    "validateWhenHidden": false,
                                    "key": "basisnorm",
                                    "customConditional": "show = (data.pv?.norm?.aantalKostendelers < 1) || (data.pv?.norm?.aantalKostendelers == null)",
                                    "type": "select",
                                    "input": true
                                },
                                {
                                    "label": "Vastgestelde normbedrag",
                                    "applyMaskOn": "change",
                                    "mask": false,
                                    "tableView": false,
                                    "currency": "EUR",
                                    "inputFormat": "plain",
                                    "truncateMultipleSpaces": false,
                                    "clearOnHide": false,
                                    "validate": {
                                        "required": true
                                    },
                                    "validateWhenHidden": false,
                                    "key": "normbedrag",
                                    "customConditional": "show = (data.pv?.norm?.aantalKostendelers < 1) || (data.pv?.norm?.aantalKostendelers == null);",
                                    "type": "currency",
                                    "input": true,
                                    "delimiter": true
                                }
                            ],
                            "width": 6,
                            "offset": 0,
                            "push": 0,
                            "pull": 0,
                            "size": "md",
                            "currentWidth": 6
                        },
                        {
                            "components": [],
                            "width": 6,
                            "offset": 0,
                            "push": 0,
                            "pull": 0,
                            "size": "md",
                            "currentWidth": 6
                        }
                    ],
                    "key": "columns2",
                    "type": "columns",
                    "input": false,
                    "tableView": false
                },
                {
                    "label": "Toelichting",
                    "applyMaskOn": "change",
                    "tableView": true,
                    "redrawOn": "data",
                    "validate": {
                        "required": true
                    },
                    "validateWhenHidden": false,
                    "key": "toelichting",
                    "conditional": {
                        "show": true,
                        "when": "pv.normAanpassen",
                        "eq": "true"
                    },
                    "type": "textfield",
                    "input": true
                },
                {
                    "label": "isHandmatigBeoordeeld",
                    "calculateValue": "value = data.pv?.normAanpassen;",
                    "key": "isHandmatigBeoordeeld",
                    "type": "hidden",
                    "input": true,
                    "tableView": false
                },
                {
                    "label": "isHandmatigBeoordeeld",
                    "customDefaultValue": "!data.pv?.normAanpassen ? value = instance.component.defaultValue : value = moment();",
                    "key": "datumVastgesteld",
                    "type": "hidden",
                    "input": true,
                    "tableView": false
                }
            ]
        },
        {
            "label": "Indienen",
            "action": "custom",
            "showValidations": true,
            "disableOnInvalid": true,
            "tableView": false,
            "key": "submit",
            "logic": [
                {
                    "name": "Disable submit",
                    "trigger": {
                        "type": "javascript",
                        "javascript": "result = data.pv.besluit.besluitDocumenten && data.pv.besluit.besluitDocumenten.length > 1"
                    },
                    "actions": [
                        {
                            "name": "Disable submit",
                            "type": "property",
                            "property": {
                                "label": "Disabled",
                                "value": "true"
                            }
                        }
                    ]
                }
            ],
            "type": "button",
            "custom": "if (data.pv?.besluit?.genomenBesluit === 'TOEGEKEND') {\n    data.pv.besluit.dienst = [\n    {\n      leveringsopdracht: [\n        {\n          verstrekkingsvorm: {\n            type: data.pv?.besluit?.pv?.verstrekkingsvorm\n          }  \n        }  \n      ]\n    }  \n  ];\n} else {\n  data.pv.besluit.dienst = [];\n}\nform.submit(); \ncomponent.disabled = true;",
            "input": true
        }
    ]
}